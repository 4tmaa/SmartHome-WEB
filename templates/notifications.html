{% extends 'base.html' %}

{% block content %}
<div class="card p-6 shadow-lg rounded-xl">
  <h2 class="font-semibold text-2xl text-white mb-4">Notifications</h2>

  {% if message %}
    <div class="bg-red-500 text-white p-4 rounded-md mb-4">
      {{ message }}
    </div>
  {% endif %}

  {% if user_role == 'guest' %}
    <div class="bg-gray-700 text-white p-4 rounded-md mb-4">
      <p class="text-center">You do not have permission to view the access logs. <a href="{{ url_for('login') }}" class="text-blue-400 hover:text-blue-600">Click here to login</a></p>
    </div>
  {% else %}

  <!-- Tabel untuk Menampilkan Notifikasi -->
  <table class="min-w-full mt-4 table-auto">
    <thead>
      <tr class="text-white bg-gray-900">
        <th class="py-2 px-4 border-b">Message</th>
        <th class="py-2 px-4 border-b">Type</th>
        <th class="py-2 px-4 border-b">User</th>
        <th class="py-2 px-4 border-b">Timestamp</th>
      </tr>
    </thead>
    <tbody class="text-gray-100">
      {% for notification in notifications %}
        <tr class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-900 text-center">
          <td class="py-2 px-4 border-b text-left">{{ notification.message }}</td>
          <td class="py-2 px-4 border-b">{{ notification.type }}</td>
          <td class="py-2 px-4 border-b">{{ notification.user }}</td>
          <td class="py-2 px-4 border-b">{{ notification.timestamp.strftime('%d-%m-%Y %H:%M WIB') }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <div class="mt-4 flex justify-between items-center">
    <div>
      {% if page > 1 %}
        <a href="{{ url_for('notifications', page=page-1) }}" class="text-blue-400 hover:text-blue-600">Previous</a>
      {% else %}
        <span class="text-gray-500">Previous</span>
      {% endif %}
    </div>

    <div class="text-center text-white">
        <a href="{{ url_for('notifications', page=1) }}" class="text-blue-400 font-bold">First</a>
        Page {{ page }} of {{ total_pages }}
        <a href="{{ url_for('notifications', page=total_pages) }}" class="text-red-400 font-bold">Last</a>
    </div>

    <div>
      {% if page < total_pages %}
        <a href="{{ url_for('notifications', page=page+1) }}" class="text-blue-400 hover:text-blue-600">Next</a>
      {% else %}
        <span class="text-gray-500">Next</span>
      {% endif %}
    </div>
  </div>

  {% endif %}
</div>
{% endblock %}
